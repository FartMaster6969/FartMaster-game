<!-- HTML -->
<div id="gameArea">
    <div id="character">█ █<br>███ █<br>█ █ █<br>█ █</div> <!-- Avancerad pixelart-gubbe -->
    <div id="background"></div> <!-- Scrollande bakgrund (moln/gräs) -->
</div>
<audio id="fartSound" src="fart.mp3"></audio>
<audio id="hitSound" src="boing.mp3"></audio>

<!-- CSS -->
#background {
    position: absolute;
    width: 1600px; /* Dubbel skärmbredd för scroll */
    height: 600px;
    background: url('pixel_clouds.png') repeat-x;
    animation: scrollBackground 10s linear infinite;
}
@keyframes scrollBackground {
    0% { background-position: 0 0; }
    100% { background-position: -800px 0; }
}
.fartCloud {
    animation: floatUp 0.8s ease-out forwards;
}
@keyframes floatUp {
    0% { opacity: 1; bottom: -20px; transform: scale(1); }
    50% { transform: scale(1.5) rotate(-10deg); }
    100% { opacity: 0; bottom: 40px; transform: scale(1); }
}

<!-- JavaScript -->
function jump() {
    if (!isGameOver) {
        jumpBonus = Math.min(jumpBonus + 5, 30);
        const totalJump = baseJumpHeight - jumpBonus;
        characterY += totalJump;
        if (characterY < 0) characterY = 0;
        showFartCloud();
        document.getElementById("fartSound").play(); // Spela fis-ljud
        jumpBonus = 0;
    }
}
function createObstacle() {
    if (!isGameOver) {
        const obstacle = document.createElement("div");
        obstacle.className = "obstacle";
        obstacle.innerText = "█ █\n█ █\n█ █\n█ █";
        obstacle.style.top = Math.random() * 400 + "px";
        // Lägg till bottenhinder med 20% chans
        if (Math.random() < 0.2 && score > 300) {
            obstacle.style.top = "520px"; // Nära botten
        }
        gameArea.appendChild(obstacle);
        // Resten av funktionen som tidigare, med ökad svårighet
    }
}
function gameOver() {
    isGameOver = true;
    clearInterval(obstacleInterval);
    messageDisplay.innerText = "Game Over! You collected " + score + " FMC. Share your score!";
    restartButton.style.display = "block";
    document.getElementById("hitSound").play(); // Spela game over-ljud
}
function restartGame() {
    score = 0;
    characterY = 300;
    jumpBonus = 0;
    difficultyIncrease = 0;
    isGameOver = false;
    scoreDisplay.innerText = "FMC: 0";
    messageDisplay.innerText = "";
    restartButton.style.display = "none";
    gameArea.innerHTML = '<div id="character">█ █<br>███ █<br>█ █ █<br>█ █</div>';
    character = document.getElementById("character");
    startGame();
}