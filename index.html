<!DOCTYPE html>
<html>
<head>
    <title>Flappy Fart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #gameArea {
            position: relative;
            width: 400px;
            height: 600px;
            background: linear-gradient(#87ceeb, #e0f6ff); /* Himmelbl√• bakgrund */
            margin: 20px auto;
            border: 2px solid #fff;
            overflow: hidden;
        }
        #character {
            position: absolute;
            width: 50px;
            height: 50px;
            font-size: 50px;
            line-height: 50px;
            top: 50%;
            left: 50px;
            transition: top 0.2s;
        }
        .fartCloud {
            position: absolute;
            font-size: 30px;
            bottom: -20px;
            left: 15px;
            opacity: 0;
            animation: floatUp 1s ease-out forwards;
        }
        @keyframes floatUp {
            0% { opacity: 1; bottom: -20px; }
            100% { opacity: 0; bottom: 20px; }
        }
        .obstacle {
            position: absolute;
            width: 50px;
            height: 100px;
            background: #ff0000;
            opacity: 0.7;
            right: 0;
            line-height: 100px;
            font-size: 30px;
            color: #fff;
        }
        #score, #message {
            font-size: 24px;
            margin: 10px;
        }
        #tokenInfo {
            font-size: 20px;
            margin: 10px;
        }
        #restartButton {
            display: none;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #ff6600;
            border: none;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
            margin: 10px;
        }
        #restartButton:hover {
            background-color: #cc5200;
        }
        a { color: #00cc00; }
    </style>
</head>
<body>
    <h1>Flappy Fart</h1>
    <p id="score">FMC: 0</p>
    <div id="gameArea">
        <div id="character">üë®‚Äçü¶≥</div>
    </div>
    <p id="message"></p>
    <p id="tokenInfo">FartMaster Coin (FMC) Address: <span id="tokenAddress">[Launching soon]</span></p>
    <p><a href="https://twitter.com/FartMasterCoin">F√∂lj oss p√• Twitter f√∂r updates!</a></p>
    <button id="restartButton" onclick="restartGame()">Restart</button>

    <script>
        const gameArea = document.getElementById("gameArea");
        const character = document.getElementById("character");
        const scoreDisplay = document.getElementById("score");
        const messageDisplay = document.getElementById("message");
        const tokenAddress = document.getElementById("tokenAddress");
        const restartButton = document.getElementById("restartButton");

        let score = 0;
        let characterY = 300; // Startposition i mitten (px)
        let gravity = 2;
        let jumpHeight = -40;
        let isGameOver = false;
        let obstacleSpeed = 3;
        let obstacleInterval;

        // Placera karakt√§ren och hantera hopp
        function updateCharacter() {
            if (!isGameOver) {
                characterY += gravity;
                if (characterY > 550) characterY = 550; // Hindra fr√•n att falla ur sk√§rmen
                if (characterY < 0) characterY = 0; // Hindra fr√•n att flyga √∂ver toppen
                character.style.top = characterY + "px";
            }
        }

        // Hoppa med mus eller mellanslag
        document.addEventListener("click", jump);
        document.addEventListener("keydown", (e) => {
            if (e.code === "Space" && !isGameOver) {
                jump();
            }
        });

        function jump() {
            if (!isGameOver) {
                characterY += jumpHeight;
                if (characterY < 0) characterY = 0; // F√∂rhindra att g√• √∂ver toppen
                showFartCloud(); // Visa gasmoln vid hopp
            }
        }

        // Visa gasmoln vid hopp
        function showFartCloud() {
            const cloud = document.createElement("div");
            cloud.className = "fartCloud";
            cloud.innerText = "üí®";
            character.appendChild(cloud);
            setTimeout(() => cloud.remove(), 1000); // Ta bort efter 1 sekund
        }

        // Skapa hinder
        function createObstacle() {
            if (!isGameOver) {
                const obstacle = document.createElement("div");
                obstacle.className = "obstacle";
                obstacle.innerText = "üåø"; // Placeholder f√∂r hinder (t.ex. b√∂nor eller v√§ggar)
                obstacle.style.top = Math.random() * 400 + "px"; // Slumpm√§ssig h√∂jd
                gameArea.appendChild(obstacle);

                let obstacleX = 400;
                const moveObstacle = setInterval(() => {
                    if (!isGameOver) {
                        obstacleX -= obstacleSpeed;
                        obstacle.style.right = (400 - obstacleX) + "px";
                        if (obstacleX < 50 && obstacleX > 0) { // Kollision med karakt√§r
                            const obstacleRect = obstacle.getBoundingClientRect();
                            const characterRect = character.getBoundingClientRect();
                            if (characterRect.top < obstacleRect.bottom && characterRect.bottom > obstacleRect.top) {
                                gameOver();
                            }
                        }
                        if (obstacleX < -50) {
                            obstacle.remove();
                            score += 10;
                            scoreDisplay.innerText = "FMC: " + score;
                            clearInterval(moveObstacle);
                        }
                    } else {
                        clearInterval(moveObstacle);
                    }
                }, 16); // Ca 60 FPS
            }
        }

        // Starta spelet
        function startGame() {
            obstacleInterval = setInterval(createObstacle, 2000); // Nytt hinder var 2:a sekund
            setInterval(updateCharacter, 16); // Uppdatera position varje frame
        }

        // Game over
        function gameOver() {
            isGameOver = true;
            clearInterval(obstacleInterval);
            messageDisplay.innerText = "Game Over! You collected " + score + " FMC.";
            restartButton.style.display = "block"; // Visa restart-knappen
        }

        // Restart spelet
        function restartGame() {
            score = 0;
            characterY = 300;
            isGameOver = false;
            scoreDisplay.innerText = "FMC: 0";
            messageDisplay.innerText = "";
            restartButton.style.display = "none"; // D√∂lj restart-knappen
            gameArea.innerHTML = '<div id="character">üë®‚Äçü¶≥</div>'; // √Öterst√§ll karakt√§r
            character = document.getElementById("character");
            startGame();
        }

        // L√§gg till token-adress efter lansering
        function updateTokenAddress() {
            tokenAddress.innerText = "ABC123...xyz"; // Ers√§tt med din Pump.fun-adress
        }
        // K√∂r updateTokenAddress() efter lansering genom att ta bort kommentaren nedan
        // updateTokenAddress();

        // Starta spelet n√§r sidan laddas
        startGame();
    </script>
</body>
</html>