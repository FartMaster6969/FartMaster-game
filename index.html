<!DOCTYPE html>
<html>
<head>
    <title>Fart Frenzy: Cosmic Stink (Test)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #gameArea {
            position: relative;
            width: 800px;
            height: 600px;
            background: #000000; /* Svart rymd-bakgrund */
            margin: 20px auto;
            border: 2px solid #fff;
            overflow: hidden;
        }
        #backgroundStars {
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><rect width="800" height="600" fill="#000000"/><text x="10" y="20" fill="white">‚òÖ</text><text x="50" y="50" fill="white">‚òÖ</text><text x="100" y="80" fill="white">‚òÖ</text><text x="150" y="120" fill="white">‚òÖ</text></svg>') no-repeat;
            animation: scrollStars 20s linear infinite;
        }
        @keyframes scrollStars {
            0% { background-position: 0 0; }
            100% { background-position: -800px 0; }
        }
        #character {
            position: absolute;
            width: 32px;
            height: 32px;
            font-size: 24px;
            line-height: 32px;
            top: 300px;
            left: 100px;
            background: #ff0000; /* R√∂d gubbe */
            color: #0000ff; /* Bl√• detaljer */
            text-align: center;
            padding: 2px;
            box-sizing: border-box;
            image-rendering: pixelated;
            transition: top 0.1s ease-out, left 0.1s ease-out;
        }
        .fartCloud {
            position: absolute;
            width: 16px;
            height: 16px;
            font-size: 12px;
            line-height: 16px;
            bottom: -20px;
            left: 8px;
            opacity: 0;
            background: #808080; /* Gr√• moln */
            color: #ffd700; /* Gul glimt */
            text-align: center;
            animation: floatUp 0.8s ease-out forwards;
        }
        @keyframes floatUp {
            0% { opacity: 1; bottom: -20px; transform: scale(1); }
            50% { transform: scale(1.2) rotate(-10deg); }
            100% { opacity: 0; bottom: 40px; transform: scale(1); }
        }
        .obstacle {
            position: absolute;
            width: 32px;
            height: 32px;
            background: #8b4513; /* Brun asteroid */
            right: 0;
            line-height: 32px;
            font-size: 24px;
            color: #fff;
            text-align: center;
            box-sizing: border-box;
        }
        .nebula {
            position: absolute;
            width: 48px;
            height: 48px;
            background: #ff69b4; /* Rosa nebulosa */
            right: 0;
            line-height: 48px;
            font-size: 24px;
            color: #87ceeb; /* Ljusbl√• detaljer */
            text-align: center;
            box-sizing: border-box;
        }
        .blackHole {
            position: absolute;
            width: 32px;
            height: 32px;
            background: #000000; /* Svart h√•l */
            right: 0;
            line-height: 32px;
            font-size: 24px;
            color: #ffffff; /* Vit kant */
            text-align: center;
            box-sizing: border-box;
        }
        .bonus {
            position: absolute;
            width: 32px;
            height: 32px;
            background: #ffd700; /* Guld f√∂r bonus */
            right: 0;
            line-height: 32px;
            font-size: 24px;
            color: #000000;
            text-align: center;
            box-sizing: border-box;
        }
        #score, #highScore, #message {
            font-size: 24px;
            margin: 10px;
        }
        #tokenInfo {
            font-size: 20px;
            margin: 10px;
        }
        #restartButton {
            display: none;
            padding: 15px 30px;
            font-size: 20px;
            background-color: #ff6600;
            border: none;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
            margin: 10px;
        }
        #restartButton:hover {
            background-color: #cc5200;
        }
        a { color: #00cc00; }
    </style>
</head>
<body>
    <h1>Fart Frenzy: Cosmic Stink (Test)</h1>
    <p id="score">CFT: 0</p>
    <p id="highScore">High Score: 0</p>
    <div id="gameArea">
        <div id="backgroundStars"></div>
        <div id="character">üë®‚Äçü¶≥</div>
    </div>
    <p id="message"></p>
    <p id="tokenInfo">CosmicFart Token (CFT) Address: <span id="tokenAddress">[Launching soon]</span></p>
    <p><a href="https://twitter.com/FartMasterCoin">F√∂lj oss p√• Twitter f√∂r updates!</a></p>
    <button id="restartButton" onclick="restartGame()">Restart</button>

    <script>
        const gameArea = document.getElementById("gameArea");
        const character = document.getElementById("character");
        const scoreDisplay = document.getElementById("score");
        const highScoreDisplay = document.getElementById("highScore");
        const messageDisplay = document.getElementById("message");
        const tokenAddress = document.getElementById("tokenAddress");
        const restartButton = document.getElementById("restartButton");

        let score = 0;
        let characterY = 300; // Startposition i mitten (px)
        let characterX = 100; // Startposition sidledes
        let gravity = 2;
        let baseJumpHeight = -60;
        let jumpBonus = 0;
        let glideSpeed = 1; // Hastighet f√∂r glid
        let isGameOver = false;
        let obstacleSpeed = 3;
        let obstacleInterval;
        let difficultyIncrease = 0;

        // Ladda high score fr√•n localStorage
        let highScore = localStorage.getItem("fartFrenzyHighScore") || 0;
        highScoreDisplay.innerText = "High Score: " + highScore;

        // Placera karakt√§ren och hantera r√∂relse
        function updateCharacter() {
            if (!isGameOver) {
                characterY += gravity;
                if (characterY > 550) characterY = 550; // H√•ller gubben ovanf√∂r botten
                if (characterY < 0) characterY = 0;
                character.style.top = characterY + "px";

                // Sidr√∂relse (A/D eller piltangenter)
                document.addEventListener("keydown", (e) => {
                    if (!isGameOver) {
                        if (e.code === "KeyA" || e.code === "ArrowLeft") {
                            characterX = Math.max(characterX - 5, 0); // Flytta v√§nster, stanna vid kant
                        } else if (e.code === "KeyD" || e.code === "ArrowRight") {
                            characterX = Math.min(characterX + 5, 700); // Flytta h√∂ger, stanna vid kant
                        }
                        character.style.left = characterX + "px";
                    }
                });
            }
        }

        // Hoppa eller glid med mus eller mellanslag
        document.addEventListener("click", jump);
        document.addEventListener("keydown", (e) => {
            if (!isGameOver) {
                if (e.code === "Space") {
                    if (e.repeat) {
                        glide(); // H√•ll Space f√∂r glid
                    } else {
                        jump(); // Klick/Space f√∂r hopp
                    }
                }
            }
        });
        document.addEventListener("keyup", (e) => {
            if (e.code === "Space") {
                stopGlide(); // Sluta glid n√§r Space sl√§pps
            }
        });

        function jump() {
            if (!isGameOver) {
                jumpBonus = Math.min(jumpBonus + 5, 30);
                const totalJump = baseJumpHeight - jumpBonus;
                characterY += totalJump;
                if (characterY < 0) characterY = 0;
                showFartCloud();
                jumpBonus = 0;
            }
        }

        function glide() {
            if (!isGameOver && characterY > 0) {
                characterY -= glideSpeed; // L√•ngsam upp√•triktad glid
                showFartCloud(); // Visa moln under glid
                if (characterY < 0) characterY = 0;
                character.style.top = characterY + "px";
            }
        }

        function stopGlide() {
            // Ingen action, bara avsluta glid-logik
        }

        // Visa gasmoln vid hopp/glid
        function showFartCloud() {
            const cloud = document.createElement("div");
            cloud.className = "fartCloud";
            cloud.innerText = "üí®";
            gameArea.appendChild(cloud);
            cloud.style.left = (characterX + 16) + "px"; // Centrera molnet under gubben
            cloud.style.bottom = (600 - characterY - 32) + "px";
            setTimeout(() => cloud.remove(), 800);
        }

        // Skapa hinder med slumpm√§ssiga typer
        function createObstacle() {
            if (!isGameOver) {
                const types = ['asteroid', 'nebula', 'blackHole'];
                const type = types[Math.floor(Math.random() * types.length)];
                let obstacle;
                if (type === 'asteroid') {
                    obstacle = document.createElement("div");
                    obstacle.className = "obstacle";
                    obstacle.innerText = "‚¨ú";
                } else if (type === 'nebula') {
                    obstacle = document.createElement("div");
                    obstacle.className = "nebula";
                    obstacle.innerText = "‚òÅ";
                } else {
                    obstacle = document.createElement("div");
                    obstacle.className = "blackHole";
                    obstacle.innerText = "‚ö´";
                }
                obstacle.style.top = Math.random() * 500 + "px"; // Slumpm√§ssig h√∂jd
                if (score > 300 && Math.random() < 0.2) obstacle.style.top = "520px"; // Bottenhinder
                gameArea.appendChild(obstacle);

                let obstacleX = 800;
                const currentSpeed = obstacleSpeed + difficultyIncrease;
                const moveObstacle = setInterval(() => {
                    if (!isGameOver) {
                        obstacleX -= currentSpeed;
                        obstacle.style.right = (800 - obstacleX) + "px";
                        if (obstacleX < 32 && obstacleX > 0) {
                            const obstacleRect = obstacle.getBoundingClientRect();
                            const characterRect = character.getBoundingClientRect();
                            if (characterRect.top < obstacleRect.bottom && characterRect.bottom > obstacleRect.top &&
                                characterRect.left < obstacleRect.right && characterRect.right > obstacleRect.left) {
                                gameOver();
                            }
                        }
                        if (obstacleX < -32) {
                            obstacle.remove();
                            score += 10;
                            scoreDisplay.innerText = "CFT: " + score;
                            difficultyIncrease = Math.min(difficultyIncrease + 0.3, 10);
                            if (score > highScore) {
                                highScore = score;
                                localStorage.setItem("fartFrenzyHighScore", highScore);
                                highScoreDisplay.innerText = "High Score: " + highScore;
                            }
                            clearInterval(moveObstacle);
                        }
                    } else {
                        clearInterval(moveObstacle);
                    }
                }, 16);
            }
        }

        // Skapa bonusar (Golden Farts)
        function createBonus() {
            if (!isGameOver && Math.random() < 0.01) { // 1% chans per frame
                const bonus = document.createElement("div");
                bonus.className = "bonus";
                bonus.innerText = "‚òÖ";
                bonus.style.top = Math.random() * 500 + "px";
                bonus.style.right = Math.random() * 600 + "px";
                gameArea.appendChild(bonus);

                let bonusX = parseInt(bonus.style.right);
                const moveBonus = setInterval(() => {
                    if (!isGameOver) {
                        bonusX -= obstacleSpeed;
                        bonus.style.right = bonusX + "px";
                        const bonusRect = bonus.getBoundingClientRect();
                        const characterRect = character.getBoundingClientRect();
                        if (characterRect.top < bonusRect.bottom && characterRect.bottom > bonusRect.top &&
                            characterRect.left < bonusRect.right && characterRect.right > bonusRect.left) {
                            score += 50;
                            scoreDisplay.innerText = "CFT: " + score;
                            if (score > highScore) {
                                highScore = score;
                                localStorage.setItem("fartFrenzyHighScore", highScore);
                                highScoreDisplay.innerText = "High Score: " + highScore;
                            }
                            bonus.remove();
                            clearInterval(moveBonus);
                        }
                        if (bonusX < -32) {
                            bonus.remove();
                            clearInterval(moveBonus);
                        }
                    } else {
                        clearInterval(moveBonus);
                    }
                }, 16);
            }
        }

        // Starta spelet
        function startGame() {
            if (isGameOver) {
                score = 0;
                characterY = 300;
                characterX = 100;
                jumpBonus = 0;
                difficultyIncrease = 0;
                isGameOver = false;
                scoreDisplay.innerText = "CFT: 0";
                messageDisplay.innerText = "";
                restartButton.style.display = "none";
                character.innerText = "üë®‚Äçü¶≥";
                gameArea.innerHTML = '<div id="backgroundStars"></div><div id="character">üë®‚Äçü¶≥</div>';
                character = document.getElementById("character");
                obstacleInterval = setInterval(createObstacle, 2000); // Nytt hinder var 2:a sekund
                setInterval(createBonus, 16); // Bonusar slumpm√§ssigt
                setInterval(updateCharacter, 16); // Uppdatera position varje frame
            }
        }

        // Game over
        function gameOver() {
            isGameOver = true;
            clearInterval(obstacleInterval);
            messageDisplay.innerText = "Game Over! You collected " + score + " CFT.";
            restartButton.style.display = "block";
        }

        // Restart spelet
        function restartGame() {
            score = 0;
            characterY = 300;
            characterX = 100;
            jumpBonus = 0;
            difficultyIncrease = 0;
            isGameOver = false;
            scoreDisplay.innerText = "CFT: 0";
            messageDisplay.innerText = "";
            restartButton.style.display = "none";
            gameArea.innerHTML = '<div id="backgroundStars"></div><div id="character">üë®‚Äçü¶≥</div>';
            character = document.getElementById("character");
            startGame();
        }

        // L√§gg till token-adress efter lansering
        function updateTokenAddress() {
            tokenAddress.innerText = "ABC123...xyz"; // Ers√§tt med din Pump.fun-adress
        }
        // K√∂r updateTokenAddress() efter lansering genom att ta bort kommentaren nedan
        // updateTokenAddress();

        // Starta spelet automatiskt n√§r sidan laddas
        window.onload = () => startGame();
    </script>
</body>
</html>